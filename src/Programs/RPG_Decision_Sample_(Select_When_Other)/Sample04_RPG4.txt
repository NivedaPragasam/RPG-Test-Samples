// Language: RPGLE (free format) - Authorization handling, SELECT without operand, nested SELECT
// Check user roles and feature flags; nested SELECT for feature gate
dcl-s userRole char(10);
dcl-s featureEnabled ind;

select;
  when userRole = 'ADMIN';
     grantAll();
  when userRole = 'MANAGER';
     select;
       when featureEnabled;
         grantManagerFeature();
       other;
         deny('Feature disabled');
     endsl;
  when userRole = 'STAFF';
     deny('Insufficient privileges');
  other;
     deny('Unknown role');
endsl;
